## 1.Go Modules是什么？

Go语言通过包管理来封装模块和复用代码，这里我们只介绍Go Modules管理方法

Go Modules于Go语言1.11版本时引入，在1.12版本正式支持，是由Go语言官方提供的包管理解决方案

Modules是相关Go包的集合，是源代码交换和版本控制的单元。go命令直接支持使用Modules，包括记录和解析对其他模块的依赖性





## 2.Go Modules的使用方法

### 2.1 环境变量

```
$ go env
GO111MODULE="auto"
GOPROXY="https://proxy.golang.org,direct"
GONOPROXY=""
GOSUMDB="sum.golang.org"
GONOSUMDB=""
GOPRIVATE=""
```

GO111MODULE

- auto：只要项目包含了 go.mod 文件的话启用 Go modules，目前在 Go1.11 至 Go1.14 中仍然是默认值。
- on：启用 Go modules，推荐设置，将会是未来版本中的默认值。
- off：禁用 Go modules，不推荐设置。



**GOPROXY**

此环境变量主要用于设计Go Module的代理





### 2.2 初始化模块

Go Modules的使用方法比较灵活，在目录下包含go.mod文件即可

首先通过如下命令创建一个新的Module

```go
go mod init [module name]
```

然后当前目录会生成go.mod文件，其内容为：

```
module ModuleName

go 1.15
```

Go Modules会自动管理包，如果需要引入依赖，只需要在go.mod下添加以下内容

```
module ModuleName
 
require (
	github.com/gohouse/gorose v1.0.5
)
```



版本是在go.mod中指定的。如果，在go.mod中没有指定，go命令会自动下载代码中的依赖的最新版本。如果，在go.mod用require语句指定包和版本 ，go命令会根据指定的路径和版本下载包，
指定版本时可以用`latest`，这样它会自动下载指定包的最新版本



### 2.3 go get



```
参数介绍：
-d 只下载不安装
-f 只有在你包含了 -u 参数的时候才有效，不让 -u 去验证 import 中的每一个都已经获取了，这对于本地 fork 的包特别有用
-fix 在获取源码之后先运行 fix，然后再去做其他的事情
-t 同时也下载需要为运行测试所需要的包
-u 强制使用网络去更新包和它的依赖包
-v 显示执行的命令
```



### 2.4 常用命令

```go
go mod init  // 初始化go.mod
go mod tidy  // 更新依赖文件
go mod download  // 下载依赖文件
go mod vendor  // 将依赖转移至本地的vendor文件
go mod edit  // 手动修改依赖文件
go mod graph  // 查看现有的依赖结构
go mod verify  // 校验依赖
```

